module.exports = function (NodeClass, packageName) {
    return function (RED) {
        function nodefn (config) {
            RED.nodes.createNode(this, config)
            const node = new NodeClass(this, RED, { packageName })
            node.config(RED, config)
        }

        RED.nodes.registerType(
            NodeClass.schema.name,
            nodefn,
            NodeClass.schema.redOpts
        )
    }
}